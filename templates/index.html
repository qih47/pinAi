<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“„ Upload Dokumen - AI Data System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; }
    .card { border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    #logBox { font-family: monospace; height: 250px; overflow-y: auto; display: none; }
  </style>
</head>
<body>
<div class="container mt-5">
  <div class="card p-4">
    <h3 class="text-center mb-4">ğŸ§  Pindad AI Data Learning Management System</h3>

    <form enctype="multipart/form-data" method="POST" action="/upload" id="uploadForm">
      <div class="row mb-3">
        <div class="col-md-6">
          <label class="form-label fw-bold">ğŸ“„ Pilih Dokumen (PDF)</label>
          <input class="form-control" type="file" id="file" name="file" accept=".pdf" required>
        </div>
        <div class="col-md-6">
          <label class="form-label fw-bold">ğŸ“ Nama File</label>
          <input type="text" id="nama_file" name="nama_file" class="form-control" placeholder="otomatis terisi saat pilih file" required readonly>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label class="form-label fw-bold">ğŸ“ Judul Dokumen</label>
          <input type="text" name="judul_dokumen" class="form-control" placeholder="contoh: Prosedur Pengujian Produk" required>
        </div>
        <div class="col-md-6">
          <label class="form-label fw-bold">ğŸ”¢ Nomor Dokumen</label>
          <input type="text" name="nomor_dokumen" class="form-control" placeholder="contoh: PR-001-2025" required>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label class="form-label fw-bold">ğŸ·ï¸ Jenis Dokumen</label>
          <select name="jenis_dokumen" class="form-select" required>
            <option value="">-- Pilih Jenis --</option>
            {% for jd in jenis_dokumen %}
              <option value="{{ jd.id }}">{{ jd.nama }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label fw-bold">ğŸ“… Tanggal Dokumen</label>
          <input type="date" name="tanggal_dokumen" class="form-control" required>
        </div>
        <div class="col-md-3">
          <label class="form-label fw-bold">ğŸ“ Tempat Dokumen</label>
          <input type="text" name="tempat_dokumen" class="form-control" placeholder="contoh: Bandung" required>
        </div>
      </div>

      <button class="btn btn-primary w-100 mt-3" type="submit" id="btnSubmit">
        ğŸš€ Proses Pharsing
      </button>
    </form>

    <div id="logBox" class="mt-4 p-3 bg-dark text-light rounded">
      <b>ğŸª„ Log Proses:</b><br>
    </div>
  </div>
</div>

<script>
  // Auto isi nama file
  document.getElementById("file").addEventListener("change", function(event) {
    const fileInput = event.target;
    const namaFileInput = document.getElementById("nama_file");
    namaFileInput.value = fileInput.files.length > 0 ? fileInput.files[0].name : "";
  });

  // Tampilkan log saat proses submit
  const form = document.getElementById("uploadForm");
  const logBox = document.getElementById("logBox");
  const btnSubmit = document.getElementById("btnSubmit");

  form.addEventListener("submit", function() {
    logBox.style.display = "block";
    logBox.innerHTML = "<b>ğŸª„ Log Proses:</b><br>ğŸš€ Mengunggah dokumen dan memulai proses OCR + Embedding...<br>";
    btnSubmit.disabled = true;
    btnSubmit.innerText = "â³ Sedang diproses...";
  });
</script>
</body>
</html>
